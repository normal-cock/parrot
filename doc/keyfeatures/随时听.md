# 想法
支持将任意音频材料输入，然后按照字幕逐句播放，支持逐句循环，同时手机端可以播放。一方面增加输入，丰富输入的英语类型；另一方面可以充分利用碎片化时间。

# 字幕
* 可以借助飞书妙计，将视频转音频，然后上传音频，生成字幕，然后下载字幕。
* 互联网上可以下载到的影视作品的字幕，上专门的字幕网站下载
* 付费的语音转文字接口
* 中文字幕，作为可选项。后期可以考虑使用chatgpt或者其他开源的大模型翻译

# 播放器功能
* [P2]手机端支持全屏，同时研究一下怎么使用代码的配置（因为有语法提示）
    * https://github.com/prateekrastogi/videojs-landscape-fullscreen
    * 20240512 测试没有生效，有时间调试看看是不是js或网络问题，顺便看看移动版无法加载字幕的原因
        * https://developer.chrome.com/blog/debugging-chrome-on-ios?hl=zh-cn
* [P2]选中查词，选中自动翻译
* [P4]专辑列表（二级播放列表）
* [P3]锁屏时，不显示上一首按钮
* [P4]用vue重构
* [P3]上传页面
    * 设置缓存时间: 设置为`private`
        * https://help.aliyun.com/zh/oss/user-guide/manage-object-metadata-10?spm=5176.28426678.J_HeJR_wZokYt378dwP-lLl.835.c4065181r2ZHCz#4815c9a499evb


# 调研记录
20240609
    转字幕格式时，遇到`'utf-8' codec can't decode byte 0xff in position 0: invalid start byte`
        方案，用vscode打开，并将变化转为utf-8。直接点击vscode中的右下角展示的当前编码，然后选择save。同时将LTFT换成LF
20240513 
    移动端html的调试方法: https://developer.chrome.com/blog/debugging-chrome-on-ios?hl=zh-cn
20240512
    加载字幕失败: Text Tracks are being loaded from another origin but the crossorigin attribute isn't used
        https://stackoverflow.com/questions/37236418/html5-track-element-does-not-have-a-crossorigin-attribute
    手机端加载不出来
        点击chrome浏览器右下方"..."，选择“请求切换到桌面版网站”
            还是不行的话研究怎么调试移动端
20240422
    声音和字幕不匹配的问题
        * 本身就不匹配。增加微调值，影响startTime和endTime
        * timeupdate的更新频率较低的问题
            * 用`requestAnimationFrame`会导致后台不运行，因为比较耗电
            * 用`setTimeout`。抽象一个`updateProgress`函数，不管是单句结束自动循环，还是主动点击快进快退，出发updatetime，还是点击字幕，都调用这个函数。且在函数中，每次把时间重置为startTime时也通过setTimeout设置一个endTime的`updateProgress`回调，时间增加10毫秒。
20240421
    跨域问题。即浏览器会根据请求的资源的服务返回的跨域策略来决定是否允许某个原网址下对该资源的访问
        oss可以通过bucket中的跨域设置来配置允许跨域的原网址
20240420
    为什么本地mp3文件调用currentTime无法设置时间？原因是使用 http.server 模块启动的 HTTP 服务器默认不会处理 Range 请求头，因此不能有效处理视频流。
        可以使用python的`rangehttpserver`包
    字幕使用https://pysubs2.readthedocs.io/en/latest/cli.html处理，将srt转为vtt
        `pysubs2 --to vtt {xxx.srt}`
20240418
    * 兼容mobile端样式
        * 解决media文件移动端无法传输的问题
        * 来源问题
    * 支持快捷键
20240416 《每日英语听力》素材有限，大部分都是老的，并且很多没有翻译，甚至没有字幕。还不如《英语新闻》
20240324 《每日英语听力》满足上面的所有要求。先试试看

# 思路
* fe: 
    * 最终版本
        * 输入: src, subtitle
        * 单句模式
            * 可以根据subtitle的时间范围来播放
            * 可以传入时间范围给播放器来播放
            * 可以通过点击subtitle来切换播放进度
    * 可用资源
        * https://www.vidstack.io/docs/wc/player/components/display/captions?styling=default-theme
        * video.js
        * 尝试AI写代码工具