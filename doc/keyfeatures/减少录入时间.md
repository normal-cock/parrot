# 减少单词录入时间

## TODO

[P1]解析页面，仅限制句子的最大高度
[P1]call for查出来是for call
[P1]搜索opponent's报500
[P2]去掉说话人
[P1]从视频切换回音频的时候，大小没有调整
[P1]纠正一下字幕
[P1]And, you know, the fact of the matter is that we prime ourself in a situation where his economy, he rewarded the wealthy. wealthy搜不到
[P1]锁屏的时候下一句，页面自动跳转有点问题——Done，加了active的判断，待观察
[P1]网络请求失败的提示——Done
[P1]接入youdao，提供更多的查询结果
[P2]针对每一句字幕的时间调节
[P2]跨句选择
[P2]待思考：句子中的**动词**，什么时候直接查raw(ed or ing)，什么时候查origin。当前都是查origin
    ing是形容词不太好识别，比如: `a grinding process`
    可能得思路
        * 寻找更准确的pos识别
        * 先查一遍，查不到再还原来查询
[P2]查询时间的优化
[P2]看看能不能识别短语

## Done
[P0]dead查不到。dead in a ditch by the road——Done
	移动端元素选择的兼容问题
[P0]在解释页面上选中，copy，然后切到其他应用，并停留10秒以上。
	可能是保存了select的问题？主动清理了，在观察观察
[P0]numbers查不出来gathering numbers as it went.——Done
	单词还原的问题，将还原算法先换成WordNetLemmatizer了，并打印diff
[P0]Drivers搜不到。Drivers whipped their horses officers and soldiers shoved and squeezed through——Done
[P0]ploughed 搜不到Do you ever think of your daddy walking day and night over ploughed fields——Done。使用句子中的pos还原sel，而非独自还原sel
[P0]高度调整为展示区域的高度——Done
[P0]选中单词一键复制. 省去格式化时间和句子选中时间——Done
[P0]一键生成生词记录。根据是否不在自己的词库中，来决定是否自动添加音标——Done
[P0]Rang查不到结果——Done
    过去式没有pos，所以pos过滤的时候过滤掉了
[P0]复制的问题。换行被换成空格了——Done
[P0]查`leaver`返回的是school-leaver——Done
[P0]解析失败`selected=Whenever||sentence=Whenever Princip missed the target people standing around would laugh at him`——Done
[P0]-Be加到已知单词中。前端支持uncheck某个unknown 单词——Done
[P1]-starving查不到a slow, grinding process of blockade, of starving the enemy out.——Done
[P1]-with the largest navy in the world, to fight a sea war里面in被解释为了名词——Done
[P1]-The Foreign Secretary reassured the nation[ˈneɪ.ʃən]. reassured没有显示原型——Done
[P1]能够解析非当前播放的subtitle——Done
[P1]adj的first查不出来——Done
[P1]unknown_words的顺序问题。向前端传list，而非dict——Done
[P1]remark应该显示原型和小写，目前显示的是句子中的样子——Done
[P1]设计新的协议，既有原句单词，又有原型，字典返回单词——Done
[P1]解释句子是，关掉生词可以自动隐藏生词意思的显示——Done
[P1]单词的意思可以根据“;”拆的更细一些。加上中文的分号的支持——Done
[P1]解释区域不足，固定解释区域和选择区域最大高度，同时点击时自动复制——Done
[P1]词性识别错误。At the Serbian town of Prnjavor, this memorial commemorates[kəˈmem.ə.reɪt] those who died.——Done
    commemorates没有查出来，memorial应该是名词，但识别成了adj
    方法1：未识别出memorial是n（识别成adj了），识别出了commemorate是动词
        import spacy
        nlp = spacy.load("en_core_web_sm")
        doc = nlp(text)
        for token in doc:
            print(f"{token.text} ({token.pos_})")
    方法2: 共同识别，把识别到的词性都查一下，手动选择

## 错误记录

nltk在mac上下载时报错：
```
[nltk_data] Error loading punkt: <urlopen error [SSL:
[nltk_data]     CERTIFICATE_VERIFY_FAILED] certificate verify failed:
[nltk_data]     unable to get local issuer certificate (_ssl.c:992)>
```
依次执行下面的命令：
* `sudo /Applications/Python\ 3.7/Install\ Certificates.command`
* `pip install --upgrade certifi`


input
    selected_word
    sentence
output
    word
    phonetic_symbol
    usecase with phonetic_symbol of unknown works
    remark for meanings of unknown works
可能的步骤:
1. 单词进行词性判断并还原为原型
    1. 还原: https://www.nltk.org/howto/stem.html
2. 然后用原型进行检查，如果不在库里和白名单里的，就自动根据词性查询单词的含义
    1. 不如自己写。下面两个要么不全无法查询音标，要不复用性不强。
        1. https://github.com/geekpradd/PyDictionary
        2. https://github.com/mhwgoo/cambridge
    2. NLTK
    3. chatgpt中“python如何查询英文单词的意思”
3. 预览最终结果

如果单词有多个意思，就选择一下；是在不行，退而求其次，只自动加音标
